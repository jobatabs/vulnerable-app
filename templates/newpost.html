{% extends "layout.html" %}
{% block title %}add new post{% endblock %}
{% block content %}
        <p><a href="/search">Search posts</a></p>
        <hr>
        {% if session.username %}
        <form action="/send" method="POST" onsubmit="return check(this)">
            <label for="title">Title:</label><br />
            <input id="title" type="text" name="title" required><br />
            <label for="content">Content:</label><br />
            <textarea id="content" name="content" rows="3" cols="40" required></textarea>  
            <input type="hidden" name="token" value="{{ session.token }}">
            <br>
            <input type="submit" value="Submit">
        </form>
        <script>
        function check(form) {
            if (form.title.value.length > 50) {
                alert("The title you provided is too long");
                return false;
            }
            if (form.content.value.length > 5000) {
                alert("Please keep your post below 5000 characters");
                return false;
            }
            return true;
        }
        </script>
        {% else %}
        <p>You must be signed in to access this page.</p>
        {% endif %}
{% endblock %}